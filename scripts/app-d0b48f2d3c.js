function routesConfig(e,n,a){a.html5Mode(!0).hashPrefix("!"),n.otherwise("/"),e.state("app",{url:"/",component:"app"})}routesConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app",["ui.router","ngMdIcons","ngStorage"]),function(){angular.module("app").factory("$semodal",["$compile",function(e){function n(n,a){$("se-modal").remove();var t=$("<se-modal />");t.html(a),$("ui-view").append(t),e(t)(n)}function a(){$("se-modal .close").click()}return{show:n,hide:a}}]).component("seModal",{templateUrl:"app/utils/modal.html",transclude:!0,controller:function(){var e=$("se-modal > div");e.modal(),e.on("hidden.bs.modal",function(){$("se-modal").remove()})}})}(),function(){angular.module("app").directive("seDrag",function(){return function(e,n){var a=n[0];a.addEventListener("dragstart",function(e){return this.draggable&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("objid",this.id.slice(4)),this.classList.add("drag")),!1},!1),a.addEventListener("dragend",function(){return this.classList.remove("drag"),!1},!1)}}).directive("seDrop",["$managegame",function(e){return{scope:{},link:function(n,a){var t=e.game.getSceneCurrent(),o=a[0];o.addEventListener("dragover",function(e){return e.dataTransfer.dropEffect="move",e.preventDefault&&e.preventDefault(),this.classList.add("dragover"),!1},!1),o.addEventListener("dragenter",function(){return this.classList.add("dragenter"),!1},!1),o.addEventListener("dragleave",function(){return this.classList.remove("dragover"),this.classList.remove("dragenter"),!1},!1),o.addEventListener("drop",function(e){e.stopPropagation&&e.stopPropagation();var a=e.dataTransfer.getData("objid"),o=this.id.slice(4);if(a!==o){var r=t.getObj(a),l=t.getObj(o);r.getParent().remove(r),angular.element(this).hasClass("dragenter")?l.parent.addAfter(r,l):l.add(r)}return $(".dragover").removeClass("dragover"),$(".dragenter").removeClass("dragenter"),n.$apply(),!1},!1)}}}])}(),angular.module("app").component("sePanelproperties",{templateUrl:"app/panels/panel_properties.html",controller:["$scope","$managegame",function(e,n){e.manage=n}]}),angular.module("app").component("sePanelprojectObject",{templateUrl:"app/panels/panel_project_object.html",bindings:{seObj:"="},controller:["$scope","$managegame",function(e,n){var a=e;a.scene=n.game.getSceneCurrent(),a.manage=n,this.$onInit=function(){a.obj=this.seObj,a.children=a.obj.getChildren()},a.showObject=function(e){n.setSelected(e)},a.deleteObj=function(){n.deleteSelected()},a.editObj=function(){n.setEditable()},a.duplcateObj=function(){var e=n.selected;n.setSelected(null);var a=e.clone();e.getParent().add(a),n.setSelected(a)},a.cutObj=function(){n.cutSelected()},a.pasteObj=function(){n.pasteInSelected()}}]}),angular.module("app").component("sePanelproject",{templateUrl:"app/panels/panel_project.html",controller:["$scope","$managegame","$semodal",function(e,n,a){var t=e;t.scene=n.game.getSceneCurrent(),t.manage=n,t.newObject=function(e){var o;return"circle"===e?void a.show(t,"<se-newcircle />"):"rect"===e?void a.show(t,"<se-newrect />"):void("draw"===e&&(o=new se.GameObject("New Draw",0,0),o.setRenderer(new se.MeshRenderer("#b0bec5","#b0bec5",2)),t.scene.add(o),n.setSelected(o),n.setDraw(o)))}}]}),angular.module("app").component("sePanelcontrolgame",{templateUrl:"app/panels/panel_controlgame.html",controller:["$scope","$managegame",function(e,n){var a=e;a.game=n.game,a.manage=n;var t=null;a.play=function(){if(a.manage.isPlaying)a.manage.isPlaying=!1,t=null;else{n.setSelected(null),t=new se.StarEngine,a.manage.gamePlay=t;var e=a.game.getSceneCurrent(),o=e.clone(t);t.addScene(o),t.run(),a.manage.isPlaying=!0}}}]}),angular.module("app").component("seNewrect",{templateUrl:"app/modals/newrect.html",controller:["$scope","$managegame","$semodal",function(e,n,a){var t=e;t.scene=n.game.getSceneCurrent(),t.width=50,t.height=50,t.name="Rect",t.submit=function(){var e=n.game.viewport.getCenter(),o=se.factory.rect({name:t.name,x:e.x,y:e.y,w:t.width,h:t.height,fillColor:"#b0bec5"});t.scene.add(o),n.setSelected(o),a.hide()}}]}),angular.module("app").component("seNewcircle",{templateUrl:"app/modals/newcircle.html",controller:["$scope","$managegame","$semodal",function(e,n,a){var t=e;t.scene=n.game.getSceneCurrent(),t.radius=20,t.name="Circle",t.submit=function(){var e=n.game.viewport.getCenter(),o=se.factory.circle({name:t.name,x:e.x,y:e.y,radius:t.radius,fillColor:"#b0bec5",lineWidth:1});t.scene.add(o),n.setSelected(o),a.hide()}}]}),angular.module("app").component("seImport",{templateUrl:"app/modals/import.html",controller:["$scope","$managegame","$compile","$semodal",function(e,n,a,t){var o=e;o.sejson="",$("se-import input[type=file]").on("change",function(e){var n=e.target.files,a=new FileReader,t=n[0];a.onload=function(){o.sejson=this.result,o.$apply()},a.readAsText(t)}),o.submit=function(){var r=JSON.parse(o.sejson),l=se.load.scene(r);n.game.scenes[0]=l,n.scene=l,a($("se-panelproject").html(""))(e),t.hide()}}]}),angular.module("app").component("app",{templateUrl:"app/main.html",controller:["$scope","$managegame","$localStorage","$semodal",function(e,n,a,t){var o=e;o.game=n.game,o.manage=n,o.scene=o.game.getSceneCurrent(),o.save=function(){n.setSelected();var e=JSON.stringify(o.game.getSceneCurrent().json());a.save=e},o.clear=function(){a.save=null,window.location.reload()},o.export=function(){n.setSelected();var e=JSON.stringify(o.game.getSceneCurrent().json()),a=new Blob([e],{type:"application/json;charset=utf-8"});saveAs(a,"scene.json")},o.import=function(){n.setSelected(),t.show(o,"<se-import />")},o.resize=function(){window.innerWidth>768?$(".sidebar").addClass("sidebar-open"):$(".sidebar").removeClass("sidebar-open")},o.closePanels=function(){$(".sidebar").sidebar("hide")},o.resize()}]}),angular.module("app").component("seGameview",{bindings:{ngGame:"=",interaction:"="},templateUrl:"app/gameview.html",controller:["$element","$scope","$managegame",function(e,n,a){function t(e){r.game.getSceneCurrent().getObjectFromCoordinate(e)===a.selected?(l.target=a.selected,l.inverse=!1):(l.target=r.game.getSceneCurrent().getCamera(),l.inverse=!0)}function o(){this.mousedown=function(e){t(r.game.viewport.transformPixelToCoordinate(e.pageX,e.pageY))},this.touchstart=function(e){if(1===e.touches.length){var n=e.touches[0];t(r.game.viewport.transformPixelToCoordinate(n.pageX,n.pageY))}},this.finishPan=function(){l.target=r.game.getSceneCurrent().getCamera(),l.inverse=!0},this.selectObj=function(e){var t=r.game.viewport.transformPixelToCoordinate(e.pageX,e.pageY),o=r.game.getSceneCurrent().getObjectFromCoordinate(t);a.setSelected(o),n.$apply()}}var r=n;r.manage=a;var l,s=new se.ViewPort(e[0]);this.$onInit=function(){r.game=this.ngGame,r.game.viewport=s,s.scale(r.game.getSceneCurrent().zoomCamera),(this.interaction||!0)&&(l=new se.PanInteraction(r.game.getSceneCurrent().getCamera()),s.addInteraction(l),s.addInteraction(new se.ZoomInteraction),s.addInteraction(new o))};var i=function(e){var n=0,t=0;37===e?n=-3:39===e?n=3:38===e?t=-3:40===e&&(t=3),a.selected.transform.move(n,t),r.$apply()};$(document).off("keydown.se"),$(document).on("keydown.se",function(e){a.selected&&i(e.keyCode)}),$(document).off("sePanEnd"),$(document).on("sePanEnd",function(){r.$apply()}),$(document).off("seDrawEnd"),$(document).on("seDrawEnd",function(){a.selected&&a.selected.setRigidBody(new se.RigidBody),a.setSelected(null),n.$apply()}),se.inherit(se.Interaction,o),o.prototype.active=function(){var e=this.parent.element;e.addEventListener("mousedown",this.mousedown),e.addEventListener("touchstart",this.touchstart),e.addEventListener("mouseend",this.finishPan),e.addEventListener("touchend",this.finishPan),e.addEventListener("dblclick",this.selectObj)},o.prototype.desactive=function(){var e=this.parent.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart),e.removeEventListener("mouseend",this.finishPan),e.removeEventListener("touchend",this.finishPan),e.removeEventListener("dblclick",this.selectObj)}}]}),function(){angular.module("app").factory("$managegame",["$localStorage",function(e){function n(e){e!==this.selected&&(p&&this.selected.setRenderer(p),this.drawInteraction&&(s.viewport.removeInteraction(this.drawInteraction),s.viewport.activeInteractions()),this.selected=null,p=null,e&&(this.selected=e,(p=e.getRenderer())&&e.setRenderer(u)))}function a(){this.selected&&p&&this.selected.setRenderer(v)}function t(){this.selected.destroy()}function o(){this.transferArea=this.selected}function r(){var e=this.transferArea;e!==this.selected&&(e.getParent().remove(e),this.selected.add(e),this.setSelected(e),this.transferArea=null)}function l(){s.viewport.desactiveInteractions(),this.drawInteraction=new se.DrawInteraction(this.selected),s.viewport.addInteraction(this.drawInteraction),this.selected.setRenderer(v)}var s=new se.StarEngine;s.runner.enabled=!1;var i;if(e.save){var c=e.save;c=JSON.parse(c),i=se.load.scene(c)}else{i=new se.Scene(new se.GradientRenderer("#004CB3","#8ED6FF"));var d=new se.GameObject("Terrain",0,0);i.add(d);var m=se.factory.rect({name:"Platform1",x:0,y:200,w:2800,h:30,fillColor:"green",isStatic:!0});d.addChild(m);var g=se.factory.rect({name:"Platform2",x:3e3,y:200,w:2800,h:30,fillColor:"green",isStatic:!0});d.addChild(g)}s.addScene(i),s.run();var p=null,u=new se.MeshRenderer("#ffb74d","#e65100",5),v=new se.EditRenderer("#ffb74d","#e65100",5,"blue");return{game:s,gamePlay:null,selected:null,isPlaying:!1,setSelected:n,setEditable:a,setDraw:l,deleteSelected:t,cutSelected:o,pasteInSelected:r,drawInteraction:null,transferArea:null}}])}(),angular.module("app").run(["$templateCache",function(e){e.put("app/gameview.html",""),e.put("app/main.html",'<se-gameview ng-game="manage.game" ng-if="!manage.isPlaying"></se-gameview>\n<se-gameview ng-game="manage.gamePlay" ng-if="manage.isPlaying" interaction="false"></se-gameview>\n\n<nav class="navbar navbar-default">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <button type="button" class="navbar-toggle collapsed" ng-click="closePanels()" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n                <span class="sr-only">Toggle navigation</span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n            </button>\n            <a class="navbar-brand" href="#">Star Game Engine Editor</a>\n        </div>\n        <div id="navbar" class="navbar-collapse collapse">\n            <ul class="nav navbar-nav navbar-right">\n                <li><a href="" ng-click="clear()">New Project</a></li>\n                <li><a href="" ng-click="save()">Save</a></li>\n                <li><a href="" ng-click="export()">Export</a></li>\n                <li><a href="" ng-click="import()">Import</a></li>\n            </ul>\n        </div><!--/.nav-collapse -->\n    </div>\n</nav>\n\n<div class="container-fluid row">\n    <div class="col-xs-6">\n        <div>\n            <se-panelcontrolgame></se-panelcontrolgame>\n        </div>\n        <div style="margin-top: 9px" ng-show="!manage.isPlaying">\n            <button type="button" class="btn btn-default" data-toggle="sidebar" data-target=".sidebar1">\n                <ng-md-icon icon="keyboard_arrow_right"></ng-md-icon>\n            </button>\n        </div>\n    </div>\n    <div class="col-xs-6" ng-if="manage.selected">\n        <div class="pull-right" ng-show="!manage.isPlaying">\n            <button type="button" class="btn btn-default" data-toggle="sidebar" data-target=".sidebar2">\n                <ng-md-icon icon="keyboard_arrow_left"></ng-md-icon>\n            </button>\n        </div>\n    </div>\n</div>\n\n<div class="col-xs-7 col-sm-3 col-lg-2 sidebar1 sidebar sidebar-left sidebar-animate sidebar-open sidebar-noautohide">\n    <se-panelproject ng-if="!manage.isPlaying"></se-panelproject>\n</div>\n<div class="col-xs-5 col-sm-3 col-lg-2 sidebar2 sidebar sidebar-right sidebar-animate sidebar-open sidebar-noautohide" ng-if="manage.selected">\n    <se-panelproperties ng-if="!manage.isPlaying"></se-panelproperties>\n</div>\n'),e.put("app/modals/import.html",'<form ng-submit="submit()">\n    <div class="form-group">\n        <label for="sefile">File input</label>\n        <input id="sefile" type="file" accept=".json">\n    </div>\n    <div class="form-group">\n        <label for="sejson">Scene</label>\n        <textarea ng-model="sejson" id="sejson" class="form-control" rows="10"></textarea>\n    </div>\n    <button type="submit" class="btn btn-primary">Import</button>\n</form>\n'),e.put("app/modals/newcircle.html",'<form ng-submit="submit()">\n    <div class="form-group">\n        <label for="rname">Name</label>\n        <input ng-model="name" id="rname" class="form-control">\n    </div>\n    <div class="form-group">\n        <label for="rradius">Radius</label>\n        <input type="number" ng-model="radius" id="rradius" class="form-control">\n    </div>\n    <button type="submit" class="btn btn-primary">Create</button>\n</form>\n'),e.put("app/modals/newrect.html",'<form ng-submit="submit()">\n    <div class="form-group">\n        <label for="rname">Name</label>\n        <input ng-model="name" id="rname" class="form-control">\n    </div>\n    <div class="form-group col-xs-6">\n        <label for="rwidth">Width</label>\n        <input type="number" ng-model="width" id="rwidth" class="form-control">\n    </div>\n    <div class="form-group col-xs-6">\n        <label for="rheight">Height</label>\n        <input type="number" ng-model="height" id="rheight" class="form-control">\n    </div>\n    <button type="submit" class="btn btn-primary">Create</button>\n</form>\n'),e.put("app/panels/panel_controlgame.html","<button type=\"button\" class=\"play btn\" ng-class=\"{'btn-success': !manage.isPlaying, 'btn-danger': manage.isPlaying}\" ng-click=\"play()\">\n    {{ manage.isPlaying ? 'Stop' : 'Play' }} <ng-md-icon icon=\"{{ manage.isPlaying ? 'stop' : 'play_arrow'}}\">\n</button>\n"),e.put("app/panels/panel_project.html",'<div class="panel panel-primary">\n    <div class="panel-heading">\n        Project\n        <a href="" class="pull-right" data-toggle="sidebar" data-target=".sidebar1">\n            <ng-md-icon icon="keyboard_arrow_left"></ng-md-icon>\n        </a>\n    </div>\n    <ul class="list-group">\n        <li class="list-group-item">\n            <div class="btn-group">\n                <button type="button" class="btn btn-default btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                    <ng-md-icon icon="add"></ng-md-icon>New <span class="caret"></span>\n                </button>\n                <ul class="dropdown-menu">\n                    <li><a href="" ng-click="newObject(\'rect\')">Rect</a></li>\n                    <li><a href="" ng-click="newObject(\'circle\')">Circle</a></li>\n                    <li><a href="" ng-click="newObject(\'draw\')">Draw</a></li>\n                </ul>\n            </div>\n        </li>\n    </ul>\n    <ul class="list-group objects">\n        <se-panelproject-object ng-repeat="obj in scene.getObjs()" se-obj="obj"></se-panelproject-object>\n    </ul>\n</div>\n'),e.put("app/panels/panel_project_object.html",'<li id="obj-{{obj.id()}}" class="list-group-item" ng-class="{active: obj == manage.selected}" se-drag se-drop draggable="{{obj == manage.selected}}">\n    <div class="name" ng-click="showObject(obj)">\n        <div class="col-xs-2">\n            <ng-md-icon icon="expand_less" ng-if="children.length && expanded" data-toggle="collapse" data-target="#sub-{{obj.id()}}"></ng-md-icon>\n            <ng-md-icon icon="expand_more" ng-if="children.length && !expanded" data-toggle="collapse" data-target="#sub-{{obj.id()}}"></ng-md-icon>\n            <ng-md-icon icon="web_asset" ng-if="!children.length"></ng-md-icon>\n        </div>\n        <div class="col-xs-7">\n            {{obj.name}}\n        </div>\n        <div ng-show="obj == manage.selected" class="col-xs-2">\n            <div class="btn-group dropdown-right">\n                <span data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                    <ng-md-icon icon="more_vert"></ng-md-icon>\n                </span>\n                <ul class="dropdown-menu">\n                    <li><a href="" ng-click="duplcateObj()"><ng-md-icon icon="content_copy"></ng-md-icon> Duplicate</a></li>\n                    <li ng-if="!manage.transferArea"><a href="" ng-click="cutObj()"><ng-md-icon icon="content_cut"></ng-md-icon> Cut</a></li>\n                    <li ng-if="manage.transferArea && manage.transferArea != manage.selected"><a href="" ng-click="pasteObj()"><ng-md-icon icon="content_paste"></ng-md-icon> Paste</a></li>\n                    <li><a href="" ng-click="deleteObj()"><ng-md-icon icon="delete"></ng-md-icon> Delete</a></li>\n                </ul>\n            </div>\n        </div>\n        &nbsp;\n    </div>\n    <ul class="list-group sublist collapse in" id="sub-{{obj.id()}}" ng-if="children.length">\n        <se-panelproject-object ng-repeat="o in children" se-obj="o"></se-panelproject-object>\n    </ul>\n</li>\n\n'),e.put("app/panels/panel_properties.html",'<div class="panel panel-primary">\n    <div class="panel-heading">\n        Properties\n        <a href="" class="pull-right" data-toggle="sidebar" data-target=".sidebar2">\n            <ng-md-icon icon="keyboard_arrow_right"></ng-md-icon>\n        </a>\n    </div>\n    <div class="panel-body">\n        <div>\n            <div class="form-group col-md-12">\n                <label for="name" class="control-label">Name: </label>\n                <input type="text" id="name" class="form-control" ng-model="manage.selected.name">\n            </div>\n            <div class="form-group col-sm-6">\n                <label for="px" class="control-label">X: </label>\n                <input type="number" id="px" class="form-control" ng-model="manage.selected.transform.position.x">\n            </div>\n            <div class="form-group col-sm-6">\n                <label for="py" class="control-label">Y: </label>\n                <input type="number" id="py" class="form-control" ng-model="manage.selected.transform.position.y">\n            </div>\n            <div class="form-group col-xs-12">\n                <label for="angle" class="control-label">Angle: </label>\n                <input type="number" id="angle" class="form-control" ng-model="manage.selected.angle">\n            </div>\n            <div class="form-group col-xs-12">\n                <div class="checkbox">\n                    <label>\n                        <input type="checkbox" ng-model="manage.selected.isStatic" ng-model-options="{ getterSetter: true }"> Is Static\n                    </label>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n'),e.put("app/utils/modal.html",'<div class="modal fade" tabindex="-1" role="dialog">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n            </div>\n            <div class="modal-body" ng-transclude>\n            </div>\n        </div><!-- /.modal-content -->\n    </div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n\n')}]),angular.module("app").config(routesConfig);
//# sourceMappingURL=../maps/scripts/app-d0b48f2d3c.js.map
